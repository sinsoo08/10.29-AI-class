<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÏßÄÎ¢∞Ï∞æÍ∏∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #b3d9ff 0%, #87ceeb 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            background: #f8f8f8;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 32px;
        }

        .info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            gap: 20px;
        }

        .info-item {
            background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%);
            color: white;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            flex: 1;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 24px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%);
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        button:hover {
            background: linear-gradient(135deg, #357abd 0%, #2a5a8a 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 122, 189, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .game-board {
            display: inline-block;
            border: 4px solid #2c3e50;
            border-radius: 10px;
            overflow: hidden;
            background: #e8e8e8;
        }

        .cell {
            width: 50px;
            height: 50px;
            border: 3px solid #a0a0a0;
            background: #d4d4d4;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 20px;
            cursor: pointer;
            user-select: none;
            transition: all 0.1s;
        }

        .cell:hover:not(.revealed):not(.mine) {
            background: #e0e0e0;
        }

        .cell.revealed {
            background: #f5f5f5;
            cursor: default;
            border: 3px solid #bbb;
        }

        .cell.mine {
            background: #e74c3c;
            color: white;
            font-size: 32px;
        }

        .cell.flag {
            background: #ffd700;
        }

        .cell.flag::before {
            content: 'üö©';
            font-size: 30px;
        }

        .cell.question {
            background: #ffe4b5;
            color: #8b4513;
            font-size: 28px;
        }

        .cell.question::before {
            content: '?';
        }

        .cell[data-count="1"] { color: #0000f0; font-weight: 900; }
        .cell[data-count="2"] { color: #008000; font-weight: 900; }
        .cell[data-count="3"] { color: #ff0000; font-weight: 900; }
        .cell[data-count="4"] { color: #800080; font-weight: 900; }
        .cell[data-count="5"] { color: #800000; font-weight: 900; }
        .cell[data-count="6"] { color: #008080; font-weight: 900; }
        .cell[data-count="7"] { color: #000000; font-weight: 900; }
        .cell[data-count="8"] { color: #404040; font-weight: 900; }

        .game-over {
            text-align: center;
            font-size: 28px;
            font-weight: bold;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
        }

        .game-over.win {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            color: white;
        }

        .game-over.lose {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
        }

        .difficulty-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .difficulty-selector button {
            flex: 1;
            padding: 10px;
            font-size: 14px;
        }

        .difficulty-selector button.active {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            box-shadow: 0 0 15px rgba(46, 204, 113, 0.6);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üí£ ÏßÄÎ¢∞Ï∞æÍ∏∞</h1>
        
        <div class="info">
            <div class="info-item">
                ‚è±Ô∏è ÏãúÍ∞Ñ: <span id="timer">0</span>
            </div>
            <div class="info-item">
                üö© ÍπÉÎ∞ú: <span id="flags">0</span> / <span id="total-mines">10</span>
            </div>
        </div>

        <div class="difficulty-selector">
            <button onclick="setDifficulty('easy')" id="btn-easy" class="active">Ïâ¨ÏõÄ</button>
            <button onclick="setDifficulty('medium')" id="btn-medium">Î≥¥ÌÜµ</button>
            <button onclick="setDifficulty('hard')" id="btn-hard">Ïñ¥Î†§ÏõÄ</button>
        </div>

        <div style="text-align: center;">
            <div id="game-status"></div>
            <div id="board" class="game-board"></div>
        </div>

        <div class="controls">
            <button onclick="resetGame()">ÏÉà Í≤åÏûÑ</button>
        </div>
    </div>

    <script>
        let rows = 10;
        let cols = 10;
        let mines = 10;
        let board = [];
        let revealed = [];
        let flags = [];
        let gameOver = false;
        let gameWon = false;
        let timer = 0;
        let timerInterval;
        let startTime;

        function initBoard() {
            board = [];
            revealed = [];
            flags = [];
            gameOver = false;
            gameWon = false;
            timer = 0;
            
            document.getElementById('timer').textContent = '0';
            document.getElementById('game-status').innerHTML = '';
            document.getElementById('game-status').className = '';
            
            clearInterval(timerInterval);

            // Îπà Î≥¥Îìú ÏÉùÏÑ±
            for (let i = 0; i < rows; i++) {
                board[i] = [];
                revealed[i] = [];
                flags[i] = [];
                for (let j = 0; j < cols; j++) {
                    board[i][j] = 0;
                    revealed[i][j] = false;
                    flags[i][j] = 0;
                }
            }

            // ÏßÄÎ¢∞ Î∞∞Ïπò
            let minesPlaced = 0;
            while (minesPlaced < mines) {
                let r = Math.floor(Math.random() * rows);
                let c = Math.floor(Math.random() * cols);
                if (board[r][c] !== -1) {
                    board[r][c] = -1;
                    minesPlaced++;
                }
            }

            // Ï£ºÎ≥Ä ÏßÄÎ¢∞ Ïàò Í≥ÑÏÇ∞
            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    if (board[i][j] !== -1) {
                        let count = 0;
                        for (let di = -1; di <= 1; di++) {
                            for (let dj = -1; dj <= 1; dj++) {
                                if (i + di >= 0 && i + di < rows && 
                                    j + dj >= 0 && j + dj < cols && 
                                    board[i + di][j + dj] === -1) {
                                    count++;
                                }
                            }
                        }
                        board[i][j] = count;
                    }
                }
            }

            renderBoard();
        }

        function renderBoard() {
            const boardElement = document.getElementById('board');
            boardElement.style.gridTemplateColumns = `repeat(${cols}, 50px)`;
            boardElement.style.display = 'inline-grid';
            boardElement.style.gridTemplateColumns = `repeat(${cols}, 50px)`;
            
            boardElement.innerHTML = '';
            
            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.dataset.row = i;
                    cell.dataset.col = j;
                    
                    if (revealed[i][j]) {
                        cell.classList.add('revealed');
                        if (board[i][j] === -1) {
                            cell.classList.add('mine');
                            cell.textContent = 'üí£';
                        } else if (board[i][j] > 0) {
                            cell.dataset.count = board[i][j];
                            cell.textContent = board[i][j];
                        }
                    } else {
                        if (flags[i][j] === 1) {
                            cell.classList.add('flag');
                        } else if (flags[i][j] === 2) {
                            cell.classList.add('question');
                        }
                    }
                    
                    cell.addEventListener('click', (e) => handleClick(e, i, j));
                    cell.addEventListener('contextmenu', (e) => {
                        e.preventDefault();
                        handleRightClick(i, j);
                    });
                    
                    boardElement.appendChild(cell);
                }
            }

            updateFlagsDisplay();
        }

        function handleClick(e, i, j) {
            if (gameOver || gameWon || flags[i][j] === 1) return;
            
            if (!startTime) {
                startTime = Date.now();
                timerInterval = setInterval(() => {
                    timer = Math.floor((Date.now() - startTime) / 1000);
                    document.getElementById('timer').textContent = timer;
                }, 1000);
            }

            reveal(i, j);
            renderBoard();
            checkWin();
        }

        function handleRightClick(i, j) {
            if (gameOver || gameWon) return;

            if (revealed[i][j]) {
                quickReveal(i, j);
                return;
            }

            flags[i][j] = (flags[i][j] + 1) % 3;
            renderBoard();
        }

        function quickReveal(i, j) {
            if (board[i][j] <= 0) return;

            let adjacentFlags = 0;
            const hiddenCells = [];

            for (let di = -1; di <= 1; di++) {
                for (let dj = -1; dj <= 1; dj++) {
                    if (di === 0 && dj === 0) continue;
                    const ni = i + di;
                    const nj = j + dj;
                    if (ni < 0 || ni >= rows || nj < 0 || nj >= cols) continue;

                    if (flags[ni][nj] === 1) {
                        adjacentFlags++;
                    } else if (!revealed[ni][nj]) {
                        hiddenCells.push([ni, nj]);
                    }
                }
            }

            if (adjacentFlags === board[i][j]) {
                hiddenCells.forEach(([ni, nj]) => reveal(ni, nj));
                renderBoard();
                checkWin();
            }
        }

        function reveal(i, j) {
            if (i < 0 || i >= rows || j < 0 || j >= cols || revealed[i][j] || flags[i][j] === 1) return;
            
            revealed[i][j] = true;
            
            if (board[i][j] === -1) {
                gameOver = true;
                revealAll();
                document.getElementById('game-status').innerHTML = 'üí• Í≤åÏûÑ Ïò§Î≤Ñ!';
                document.getElementById('game-status').className = 'game-over lose';
                clearInterval(timerInterval);
                return;
            }
            
            if (board[i][j] === 0) {
                for (let di = -1; di <= 1; di++) {
                    for (let dj = -1; dj <= 1; dj++) {
                        if (i + di >= 0 && i + di < rows && 
                            j + dj >= 0 && j + dj < cols) {
                            if (!revealed[i + di][j + dj] && !flags[i + di][j + dj]) {
                                reveal(i + di, j + dj);
                            }
                        }
                    }
                }
            }
        }

        function revealAll() {
            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    revealed[i][j] = true;
                }
            }
        }

        function checkWin() {
            let revealedCount = 0;
            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    if (revealed[i][j]) revealedCount++;
                }
            }
            
            if (revealedCount === rows * cols - mines) {
                gameWon = true;
                document.getElementById('game-status').innerHTML = 'üéâ ÏäπÎ¶¨!';
                document.getElementById('game-status').className = 'game-over win';
                clearInterval(timerInterval);
            }
        }

        function updateFlagsDisplay() {
            let flagCount = 0;
            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    if (flags[i][j] === 1) flagCount++;
                }
            }
            document.getElementById('flags').textContent = flagCount;
        }

        function resetGame() {
            startTime = null;
            initBoard();
        }

        function setDifficulty(level) {
            startTime = null;
            
            // Î™®Îì† ÎÇúÏù¥ÎèÑ Î≤ÑÌäºÏóêÏÑú active ÌÅ¥ÎûòÏä§ Ï†úÍ±∞
            document.querySelectorAll('.difficulty-selector button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            if (level === 'easy') {
                rows = 10;
                cols = 10;
                mines = 10;
                document.getElementById('btn-easy').classList.add('active');
            } else if (level === 'medium') {
                rows = 16;
                cols = 16;
                mines = 40;
                document.getElementById('btn-medium').classList.add('active');
            } else if (level === 'hard') {
                rows = 16;
                cols = 30;
                mines = 99;
                document.getElementById('btn-hard').classList.add('active');
            }
            
            document.getElementById('total-mines').textContent = mines;
            initBoard();
        }

        // Ï¥àÍ∏∞Ìôî
        initBoard();
    </script>
</body>
</html>

